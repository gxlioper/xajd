/*
 * Generated by MyEclipse Struts
 * Template path: templates/java/JavaClass.vtl
 */
package xgxt.xljk.zxzx.action;

import java.util.HashMap;
import java.util.List;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.apache.struts.action.ActionForm;
import org.apache.struts.action.ActionForward;
import org.apache.struts.action.ActionMapping;

import xgxt.DAO.DAO;
import xgxt.action.BaseAction;
import xgxt.xljk.zxzx.form.Xljk_zxspp_Form;
import xgxt.xljk.zxzx.service.xljk_xzsxx_ppService;

/** 
 * MyEclipse Struts
 * Creation date: 10-20-2010
 * 
 * XDoclet definition:
 * @struts.action validate="true"
 */
public class xljk_xzsxx_ppAction extends BaseAction {
	/*
	 * Generated Methods
	 */

	/** 
	 * Method zxsPp
	 * 心理咨询师（与辅导员）匹配
	 * @param mapping
	 * @param form
	 * @param request
	 * @param response
	 * @return ActionForward
	 * @throws Exception 
	 */
	public ActionForward zxsPp(ActionMapping mapping, ActionForm form,
			HttpServletRequest request, HttpServletResponse response) throws Exception {
		List<HashMap<String,String>>bmList=DAO.getInstance().getBmListAll();
		Xljk_zxspp_Form zxspp_form=(Xljk_zxspp_Form)form;
		xljk_xzsxx_ppService service=new xljk_xzsxx_ppService();
		String doType=request.getParameter("doType");
		if("zxspp".equalsIgnoreCase(doType)){
			boolean result=service.plUpdate(zxspp_form);
			request.setAttribute("result", result);
		}
		zxspp_form.getPpzxsxx();
		//获取已经匹配咨询师列表
		request.setAttribute("ppzxsList", service.getPpzxsList());
		//咨询师否列表
		request.setAttribute("zxsList", service.getZxsList());
		//辅导员列表
		request.setAttribute("fdyList", service.getFdyList());
		request.setAttribute("bmList", bmList);
		return mapping.findForward("zxsPp");
	}
}