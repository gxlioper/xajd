/*
 * Generated by MyEclipse Struts
 * Template path: templates/java/JavaClass.vtl
 */
package xgxt.studentInfo.action;

import java.util.HashMap;
import java.util.List;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.apache.struts.action.ActionForm;
import org.apache.struts.action.ActionForward;
import org.apache.struts.action.ActionMapping;

import xgxt.action.Base;
import xgxt.form.User;
import xgxt.studentInfo.model.XsxxtjcxglForm;
import xgxt.studentInfo.service.XsxxtjcxglService;
import xgxt.utils.FormModleCommon;

import com.zfsoft.basic.BasicAction;

/**
 * <p>Title: 学生工作管理系统</p>
 * <p>Description: 学生信息统计查询管理Action</p>
 * <p>Copyright: Copyright (c) 2008</p>
 * <p>Company: zfsoft</p>
 * <p>Author: 李容</p>
 * <p>Version: 1.0</p>
 * <p>Time: 2010-12-21</p>
 */
public class XsxxtjcxglAction extends BasicAction {	
	
	/** 
	 * 信息统计查询主页面
	 * @param mapping
	 * @param form
	 * @param request
	 * @param response
	 * @return ActionForward
	 */
	public ActionForward xxtjcx(ActionMapping mapping, ActionForm form,
			HttpServletRequest request, HttpServletResponse response) {
		User user = getUser(request);
		XsxxtjcxglForm model = (XsxxtjcxglForm)form;
		
		if("xy".equalsIgnoreCase(user.getUserType())){
			model.setXydm(user.getUserDep());
			request.setAttribute("xydm", user.getUserDep());
		}
		
		request.setAttribute("path", "xsxxtjcx.do");
		FormModleCommon.commonRequestSet(request);
		request.setAttribute("njList", Base.getNjList());
		return mapping.findForward("success");
	}
	
	/** 
	 * 班级学生信息
	 * @param mapping
	 * @param form
	 * @param request
	 * @param response
	 * @return ActionForward
	 */
	public ActionForward bjxsxx(ActionMapping mapping, ActionForm form,
			HttpServletRequest request, HttpServletResponse response) {
		User user = getUser(request);
		XsxxtjcxglForm model = (XsxxtjcxglForm)form;
		//学生干部
		XsxxtjcxglService service = new XsxxtjcxglService();
		List<HashMap<String, String>> xsgbList = service.queryXsbgList(model);
		//普通学生
		//List<HashMap<String, String>> ptxsList = service.queryPtxsList(model);
		request.setAttribute("path", "xsxxtjcx.do");
		FormModleCommon.commonRequestSet(request);
		return mapping.findForward("bjxsxx");
	}
	
}