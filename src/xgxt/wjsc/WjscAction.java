/*
 * Generated by MyEclipse Struts
 * Template path: templates/java/JavaClass.vtl
 */
package xgxt.wjsc;

import java.io.IOException;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

import org.apache.struts.action.Action;
import org.apache.struts.action.ActionForm;
import org.apache.struts.action.ActionForward;
import org.apache.struts.action.ActionMapping;

import xgxt.action.Base;

/** 
 * MyEclipse Struts
 * Creation date: 08-17-2007
 * 
 * XDoclet definition:
 * @struts.action validate="true"
 */
public class WjscAction extends Action {
	/*
	 * Generated Methods
	 */

	/** 
	 * Method execute
	 * @param mapping
	 * @param form
	 * @param request
	 * @param response
	 * @return ActionForward
	 * @throws Exception 
	 * @throws IOException 
	 */
	public ActionForward execute(ActionMapping mapping, ActionForm form,
			HttpServletRequest request, HttpServletResponse response) throws IOException, Exception {
		// TODO Auto-generated method stub
		HttpSession session = request.getSession();
		try {
			/** 在线检测 */
			int i = Base.chkTimeOut(session);
			if (i <= 2) {
				request.setAttribute("errMsg", "登陆超时，请重新登陆！");
				return new ActionForward("/login.jsp", false);
			}
		String myAction = mapping.getParameter();
		ActionForward myFwd = null;
		if("filePutOut".equalsIgnoreCase(myAction)){ //文件上传(发放)
			myFwd = new ActionForward("/wjffManage.do?method=wjffAdd",false);
			//myFwd = WjscOperactionAction.PutFile(mapping, form, request, response);
		}else if("fileIncept".equalsIgnoreCase(myAction)){ //文件下载(接收)
			myFwd = WjscOperactionAction.InceptFile(mapping, form, request, response);
		}else if("fileSave".equalsIgnoreCase(myAction)){ //文件上传(保存)
			myFwd = WjscOperactionAction.SaveFile(mapping, form, request, response);
		}else if("fileView".equalsIgnoreCase(myAction)){ //文件下载(显示)
			myFwd = WjscOperactionAction.ViewFile(mapping, form, request, response);
		}else if("fileDownload".equalsIgnoreCase(myAction)){ //文件下载(下载)
			myFwd = WjscOperactionAction.DownLoadFile(mapping, form, request, response);
		}else if("fileManager".equalsIgnoreCase(myAction)){ //文件管理
			//myFwd = WjscOperactionAction.ManagerFile(mapping, form, request, response);
			myFwd = new ActionForward("/wjffManage.do?method=fileQuery",false);
		}else if("fileDel".equalsIgnoreCase(myAction)){ //文件删除
			//哥改道，不走这条路了！
			//myFwd = WjscOperactionAction.DelFile(mapping, form, request, response);
		} else if ("gwjsView".equalsIgnoreCase(myAction)) {//公文接收
			myFwd = WjscOperactionAction.gwjsView(mapping, form, request, response);
		}else if("gwjsMore".equalsIgnoreCase(myAction)){//更多公文
			myFwd = WjscOperactionAction.gwjsMore(mapping, form, request, response);
		}else if("fileExpData".equalsIgnoreCase(myAction)){//更多公文
			myFwd = new WjscOperactionAction().gwjsSjdc(mapping, form, request, response);
		}
		
		
		return myFwd;
		} catch (Exception e) {
			e.printStackTrace();
			request.setAttribute("errMsg", "出现灾难性故障，" + e.toString());
			return new ActionForward("/errMsg.do", false);
		}
	}
	
}