/*
 * Generated by MyEclipse Struts
 * Template path: templates/java/JavaClass.vtl
 */
package xgxt.pjpy.ghxy.xxxf;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

import org.apache.struts.action.ActionForm;
import org.apache.struts.action.ActionForward;
import org.apache.struts.action.ActionMapping;

import xgxt.action.Base;
import xgxt.action.BaseAction;
import xgxt.utils.FormModleCommon;

/** 
 * MyEclipse Struts
 * Creation date: 08-27-2010
 * 
 * XDoclet definition:
 * @struts.action validate="true"
 */
public class GhxyXxxfAction extends BaseAction {
	/*
	 * Generated Methods
	 */

	/** 
	 * Method execute
	 * @param mapping
	 * @param form
	 * @param request
	 * @param response
	 * @return ActionForward
	 * @throws Exception 
	 */
	public ActionForward xxxfWh(ActionMapping mapping, ActionForm form,
			HttpServletRequest request, HttpServletResponse response) throws Exception {

		HttpSession session=request.getSession();
		GhxyXxxfService service=new GhxyXxxfService();
		GhxyXxxfForm xxxfForm=(GhxyXxxfForm)form;
		
		String tabName="ghxy_xxfb";
		String doType=request.getParameter("doType");
		String xn=Base.currXn;
		String xq=Base.currXq;
		String lx=request.getParameter("lx");
		String userType=session.getAttribute("userType").toString();
		String userDep=session.getAttribute("userDep").toString();
		
		if(Base.isNull(lx)){
			lx="wh";
		}
		
		if("save".equalsIgnoreCase(doType)){
			service.xxxfWh(request,xxxfForm);
			doType="qry";
		}
		
		if("qry".equalsIgnoreCase(doType)){
			if("wh".equalsIgnoreCase(lx)){
				String[]outputColumn={"xh","xh","xm","xn","xqmc","nj","xy","zymc","bjmc"};
				this.selectPageDataByPagination(request, form, tabName, "view_ghxy_xxxfwh", outputColumn);
			}else if("cx".equalsIgnoreCase(lx)){
				String[]outputColumn={"xh","xh","xm","xn","xqmc","nj","xy","zymc","bjmc","zf"};
				this.selectPageDataByPagination(request, form, tabName, "view_ghxy_xxxf", outputColumn);
			}
		}
		
		if("wh".equalsIgnoreCase(lx)){
			xxxfForm.setXn(xn);
			xxxfForm.setXq(xq);
			request.setAttribute("dqxn", xn);
			request.setAttribute("dqxq", xq);
		}
		
		if("xy".equalsIgnoreCase(userType)){
			xxxfForm.setXydm(userDep);
		}
		request.setAttribute("lx", lx);
		request.setAttribute("path", "ghxyXxxf.do?method=xxxfWh");
		FormModleCommon.commonRequestSet(request);
		FormModleCommon.setNdXnXqList(request);
		FormModleCommon.setNjXyZyBjListForFdyBzr(request);
		
		return mapping.findForward("xxxfWh");
	}
}