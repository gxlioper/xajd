/*
 * Generated by MyEclipse Struts
 * Template path: templates/java/JavaClass.vtl
 */
package xgxt.pjpy.ghxy.szfgl;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

import org.apache.struts.action.ActionForm;
import org.apache.struts.action.ActionForward;
import org.apache.struts.action.ActionMapping;

import xgxt.action.BaseAction;
import xgxt.utils.FormModleCommon;

/** 
 * MyEclipse Struts
 * Creation date: 08-28-2010
 * 硅湖学院素质分管理
 * XDoclet definition:
 * @struts.action validate="true"
 */
public class GhxySzfglAction extends BaseAction {
	/*
	 * Generated Methods
	 */

	/** 
	 * 素质分查询
	 * Method szfCx
	 * @param mapping
	 * @param form
	 * @param request
	 * @param response
	 * @return ActionForward
	 */
	public ActionForward szfCx(ActionMapping mapping, ActionForm form,
			HttpServletRequest request, HttpServletResponse response) {
		
		HttpSession session=request.getSession();
		GhxySzfglForm szfglForm=(GhxySzfglForm)form;
		String viewName="view_ghxy_szxfgl";
		String userType=session.getAttribute("userType").toString();
		String userName=session.getAttribute("userName").toString();
		String doType=request.getParameter("doType");
		if("qry".equalsIgnoreCase(doType)){
			String []outputColumn={"xh","xm","xb","nj","xy","zymc","bjmc","zf"};
			this.selectPageDataByPagination(request, form, "", viewName, outputColumn);
		}
		
		if("student".equalsIgnoreCase(userType)){
			szfglForm.setXh(userName);
		}
		request.setAttribute("path", "ghxySzfgl.do?method=szfCx");
		FormModleCommon.commonRequestSet(request);
		FormModleCommon.setNjXyZyBjListForFdyBzr(request);
		FormModleCommon.setNdXnXqList(request);
		return mapping.findForward("szfCx");
	}
	
	/**
	 * 素质分详细信息
	 * Method showOne
	 * @param mapping
	 * @param form
	 * @param request
	 * @param response
	 * @return
	 */
	public ActionForward showOne(ActionMapping mapping, ActionForm form,
			HttpServletRequest request, HttpServletResponse response) {
		
		String viewName="view_ghxy_szfxxxx";
		String pkValue=request.getParameter("pkValue");
		String[]outputColumn={"xh","xm","xb","xn","xqmc","xy","zymc","bjmc","zf","xmmc"};
		request.setAttribute("annexTerm", " and xh= '"+pkValue+"'");
		this.selectPageData(request, "", viewName, outputColumn);
		FormModleCommon.setNjXyZyBjListForFdyBzr(request);
		FormModleCommon.setNdXnXqList(request);
		return mapping.findForward("szfXxxx");
	}
	

	/**
	 * 导出
	 * @param mapping
	 * @param form
	 * @param request
	 * @param response
	 * @return ActionForward
	 * */
	public ActionForward expDate(ActionMapping mapping, ActionForm form,
			HttpServletRequest request, HttpServletResponse response) {
		
		try {
			
			this.expPageData(request, response,"" , "view_ghxy_szfxxxx", null);
		
		} catch (Exception e) {
		
			e.printStackTrace();
		
		}			
		
		return mapping.findForward("success");
	}
}